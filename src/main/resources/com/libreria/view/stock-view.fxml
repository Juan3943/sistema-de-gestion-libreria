<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.libreria.controller.StockController">

    <!-- ENCABEZADO: TÃ­tulo y bÃºsqueda -->
    <top>
        <VBox spacing="15" style="-fx-background-color: #34495e; -fx-padding: 20;">

            <!-- TÃ­tulo principal -->
            <HBox alignment="CENTER_LEFT">
                <Label text="ðŸ“¦ GestiÃ³n de Productos"
                       style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Control de Inventario"
                       style="-fx-font-size: 14px; -fx-text-fill: #bdc3c7;"/>
            </HBox>

            <!-- Barra de bÃºsqueda y filtros -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Buscar:" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                <TextField fx:id="txtBuscar" promptText="CÃ³digo o nombre del producto" prefWidth="250"/>
                <Button fx:id="btnBuscar" text="ðŸ” Buscar" onAction="#buscarProductos"
                        style="-fx-background-color: #3498db; -fx-text-fill: white;"/>
                <Button fx:id="btnLimpiarBusqueda" text="ðŸ—‘ï¸ Limpiar" onAction="#limpiarBusqueda"
                        style="-fx-background-color: #2ecc71; -fx-text-fill: white;"/>
                <Button fx:id="btnSoloStockBajo" text="âš ï¸ Solo Stock Bajo" onAction="#mostrarSoloStockBajo"
                        style="-fx-background-color: #e67e22; -fx-text-fill: white;"/>
                <ComboBox fx:id="cbFiltroEstado" prefWidth="120"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Button fx:id="btnNuevoProducto" text="âž• Nuevo Producto" onAction="#nuevoProducto"
                        style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;"/>
            </HBox>

        </VBox>
    </top>

    <!-- CONTENIDO PRINCIPAL -->
    <center>
        <!-- Tabla de productos -->
        <TableView fx:id="tablaProductos" style="-fx-background-color: white;">
            <columns>
                <TableColumn fx:id="colCodigo" text="CÃ³digo" prefWidth="120" minWidth="100"/>
                <TableColumn fx:id="colNombre" text="Nombre del Producto" prefWidth="200" minWidth="150"/>
                <TableColumn fx:id="colCategoria" text="CategorÃ­a" prefWidth="100" minWidth="80"/>
                <TableColumn fx:id="colStockActual" text="Stock" prefWidth="80" minWidth="60"/>
                <TableColumn fx:id="colStockMinimo" text="MÃ­n." prefWidth="60" minWidth="50"/>
                <TableColumn fx:id="colPrecioVenta" text="Precio" prefWidth="100" minWidth="80"/>
                <TableColumn fx:id="colEstadoStock" text="Estado Stock" prefWidth="100"/>
                <TableColumn fx:id="colEstadoActivo" text="Estado" prefWidth="80" minWidth="70"/>
                <TableColumn fx:id="colAcciones" text="Acciones" prefWidth="60" minWidth="50"/>
            </columns>

            <!-- Mensaje cuando no hay datos -->
            <placeholder>
                <VBox alignment="CENTER" spacing="10" style="-fx-padding: 50;">
                    <Label text="ðŸ“¦" style="-fx-font-size: 48px;"/>
                    <Label text="No hay productos para mostrar"
                           style="-fx-font-size: 16px; -fx-text-fill: #7f8c8d;"/>
                    <Label text="Use el botÃ³n 'Nuevo Producto' para agregar el primero"
                           style="-fx-font-size: 12px; -fx-text-fill: #95a5a6;"/>
                </VBox>
            </placeholder>
        </TableView>
    </center>

    <!-- PIE: EstadÃ­sticas y acciones -->
    <bottom>
        <VBox spacing="10" style="-fx-background-color: #ecf0f1; -fx-padding: 15;">

            <!-- EstadÃ­sticas -->
            <HBox spacing="30" alignment="CENTER_LEFT"
                  style="-fx-background-color: white; -fx-padding: 15; -fx-border-radius: 5;">

                <VBox alignment="CENTER" spacing="5">
                    <Label text="ðŸ“Š" style="-fx-font-size: 20px;"/>
                    <Label text="ESTADÃSTICAS" style="-fx-font-size: 11px; -fx-font-weight: bold; -fx-text-fill: #7f8c8d;"/>
                </VBox>

                <Separator orientation="VERTICAL"/>

                <VBox alignment="CENTER" spacing="3">
                    <Label fx:id="lblTotalProductos" text="Total: 0"
                           style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                    <Label text="Productos registrados"
                           style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;"/>
                </VBox>

                <Separator orientation="VERTICAL"/>

                <VBox alignment="CENTER" spacing="3">
                    <Label fx:id="lblProductosStockBajo" text="Stock bajo: 0"
                           style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #e67e22;"/>
                    <Label text="Requieren atenciÃ³n"
                           style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;"/>
                </VBox>

                <Separator orientation="VERTICAL"/>

                <VBox alignment="CENTER" spacing="3">
                    <Label fx:id="lblProductosSinStock" text="Sin stock: 0"
                           style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
                    <Label text="Sin disponibilidad"
                           style="-fx-font-size: 10px; -fx-text-fill: #7f8c8d;"/>
                </VBox>

                <Region HBox.hgrow="ALWAYS"/>

                <!-- BotÃ³n actualizar -->
                <Button fx:id="btnActualizar" text="ðŸ”„ Actualizar" onAction="#actualizarDatos"
                        style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 8 20;"/>
            </HBox>

            <!-- InformaciÃ³n de ayuda -->
            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 5 0;">
                <Label text="ðŸ’¡" style="-fx-font-size: 12px;"/>
                <Label text="Haga clic en ðŸ“¦ para ajustar stock, o en â„¹ï¸ para ver informaciÃ³n completa del producto"
                       style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Datos actualizados automÃ¡ticamente"
                       style="-fx-font-size: 10px; -fx-text-fill: #95a5a6; -fx-font-style: italic;"/>
            </HBox>

        </VBox>
    </bottom>

</BorderPane>

        <!--
        =====================================================
        EXPLICACIÃ“N DEL DISEÃ‘O FXML:
        =====================================================

        ESTRUCTURA PRINCIPAL:
        - BorderPane: Layout principal que divide la pantalla en regiones
          * top: Encabezado con tÃ­tulo y bÃºsqueda
          * center: Tabla principal de productos
          * bottom: EstadÃ­sticas y informaciÃ³n

        ELEMENTOS IMPORTANTES:

        1. fx:controller: Conecta este FXML con StockController.java

        2. fx:id: Identifica elementos para usar desde Java
           - txtBuscar, btnBuscar, etc. corresponden a las variables @FXML

        3. onAction: Define quÃ© mÃ©todo llamar cuando se hace clic
           - onAction="#buscarProductos" llama al mÃ©todo buscarProductos()

        4. TableView y TableColumn:
           - fx:id="tablaProductos" se conecta con la variable en Java
           - Cada columna tiene prefWidth para controlar el ancho
           - minWidth evita que se hagan demasiado pequeÃ±as

        5. Estilos CSS embebidos:
           - -fx-background-color: Color de fondo
           - -fx-text-fill: Color del texto
           - -fx-font-size: TamaÃ±o de fuente
           - -fx-padding: Espaciado interno

        6. Layout containers:
           - VBox: Organiza verticalmente
           - HBox: Organiza horizontalmente
           - Region: Espaciador flexible (HBox.hgrow="ALWAYS")

        7. placeholder: Contenido que se muestra cuando la tabla estÃ¡ vacÃ­a

        FLUJO DE DATOS:
        1. Usuario escribe en txtBuscar
        2. Hace clic en btnBuscar
        3. JavaFX llama a buscarProductos() en StockController
        4. El controller actualiza productosData
        5. La tabla se actualiza automÃ¡ticamente (ObservableList)

        Este diseÃ±o es:
        - Responsivo: Se adapta al tamaÃ±o de ventana
        - Funcional: Todos los elementos estÃ¡n conectados
        - Profesional: Colores y espaciado consistentes
        - Intuitivo: Iconos y textos claros
        -->