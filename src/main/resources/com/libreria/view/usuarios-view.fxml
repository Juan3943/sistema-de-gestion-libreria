<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.libreria.controller.UsuariosController"
      spacing="20"
      style="-fx-background-color: #ecf0f1;">

    <padding>
        <Insets top="30" right="30" bottom="30" left="30"/>
    </padding>

    <!-- HEADER -->
    <HBox alignment="CENTER_LEFT" spacing="20">

        <VBox spacing="5" HBox.hgrow="ALWAYS">
            <Label text="ðŸ‘¥ GestiÃ³n de Usuarios"
                   style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

            <Label text="Administrar usuarios del sistema"
                   style="-fx-font-size: 13px; -fx-text-fill: #7f8c8d;"/>
        </VBox>

        <Button fx:id="btnNuevoUsuario"
                text="âž• Nuevo Usuario"
                onAction="#handleNuevoUsuario"
                style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 25; -fx-cursor: hand;"/>

        <Button text="ðŸ  Volver al Dashboard"
                onAction="#handleVolver"
                style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 12 25; -fx-cursor: hand;"/>
    </HBox>

    <Separator/>

    <!-- REGLAS DE SEGURIDAD (Info) -->
    <VBox spacing="8" style="-fx-background-color: #fff3cd; -fx-padding: 15; -fx-border-radius: 5; -fx-background-radius: 5;">
        <Label text="ðŸ›¡ï¸ Reglas de Seguridad:"
               style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #856404;"/>
        <Label text="â€¢ Puede editar su propia cuenta y gestionar empleados"
               style="-fx-font-size: 11px; -fx-text-fill: #856404;"/>
        <Label text="â€¢ No puede editar, resetear contraseÃ±as ni desactivar otros administradores"
               style="-fx-font-size: 11px; -fx-text-fill: #856404;"/>
        <Label text="â€¢ Debe haber al menos un administrador activo en el sistema"
               style="-fx-font-size: 11px; -fx-text-fill: #856404;"/>
    </VBox>

    <!-- TABLA -->
    <VBox VBox.vgrow="ALWAYS" spacing="15">

        <Label fx:id="lblInfoTabla"
               text="Cargando usuarios..."
               style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d; -fx-font-style: italic;"/>

        <TableView fx:id="tablaUsuarios"
                   VBox.vgrow="ALWAYS"
                   style="-fx-background-color: white;">

            <columns>
                <TableColumn fx:id="colId" text="ID" prefWidth="60" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colUsername" text="Usuario" prefWidth="150"/>
                <TableColumn fx:id="colNombre" text="Nombre" prefWidth="150"/>
                <TableColumn fx:id="colApellido" text="Apellido" prefWidth="150"/>
                <TableColumn fx:id="colTipo" text="Rol" prefWidth="120" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colActivo" text="Estado" prefWidth="100" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colFechaCreacion" text="Creado" prefWidth="150" style="-fx-alignment: CENTER;"/>
            </columns>

            <placeholder>
                <Label text="No hay usuarios registrados"
                       style="-fx-text-fill: #95a5a6; -fx-font-size: 14px;"/>
            </placeholder>

        </TableView>

    </VBox>

    <Separator/>

    <!-- BOTONES DE ACCIÃ“N -->
    <HBox spacing="15" alignment="CENTER">

        <Button fx:id="btnEditar"
                text="âœï¸ Editar Usuario"
                onAction="#handleEditarUsuario"
                disable="true"
                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 10 20; -fx-cursor: hand;"/>

        <Button fx:id="btnResetPassword"
                text="ðŸ”‘ Resetear ContraseÃ±a"
                onAction="#handleResetearPassword"
                disable="true"
                style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-padding: 10 20; -fx-cursor: hand;"/>

        <Button fx:id="btnCambiarEstado"
                text="ðŸ”´ Desactivar Usuario"
                onAction="#handleCambiarEstado"
                disable="true"
                style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-padding: 10 20; -fx-cursor: hand;"/>

    </HBox>

</VBox>